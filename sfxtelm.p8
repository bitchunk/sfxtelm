pico-8 cartridge // http://www.pico-8.com
version 18
__lua__
function _init()
poke(0x5f2d,1)
e=0
v=0
r=0
t=0
d=20
c=0
end
function _update60()
end
function _draw()
local x,y=stat(32),stat(33)
local p,n=0x3200+68*8+2*0
cls()
d=mid(d+stat(36)*4+(btn(2) and 1 or 0)-(btn(3) and 1 or 0),1,256)
e=(e+(btnp(4) and 1 or 0)-(btnp(5) and 1 or 0)+16)%16

if stat(34)>0 then
v=d
t=flr(atan2(64-y,64-x)*64)
c=sqrt((x-64)^2+(y-64)^2,2)
sfx(8)
else
v=max(v-1,0)
end
r=c*v/d

n=min(t,64)+e%8*2^6+ceil(min(r/64*8,7))*2^9+flr(e/8)*2^15
poke2(p,n)
poke2(p+2,n)

poke(0x5f1f,e+1)
poke(0x5f16,ceil(t/2)+(ceil(t)%2==0 and 128 or 0))
poke(0x5f17,peek(0x5f16)+128)

circ(64,64,63,5)
if v>0 then
local p,q=min(r,63),min(r-d/10,63)
circfill(64,64,p,6)
circfill(64,64,q,7)
circfill(64,64,q-1,0)
for i=0,e do
local s,c,w=sin(time()*t/32+i/(e+1)),cos(time()*t/32+i/(e+1)),(p-q)/2
circfill(64+s*(p-w),64+c*(p-w),w+1,0)
end
end
spr(0,x-3,y-3)
end
__gfx__
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00f00f00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
000ff000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
000ff000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00f00f00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
__sfx__
010100001805018170000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
010100001817018270000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
010100001827018370000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
010100001837018470000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
010100001847018570000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
010100001857018770000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
010100001807018770000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
010100001877018170000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
000100023a3503a350000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
001000003f0503f0503f0503f0503f0503f0503f0503f0503f0503f0503f0503f0503f0503f0503f0503f0503f0503f0503e0503f0503c0503c0503c0503c0503c0503c0503c0503c0503c0503c0503c0503c050
__music__
03 08424344

